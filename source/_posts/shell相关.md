---
title: shell相关
date: 2019-07-20 17:04:05
subtitle:
categories: Linux
tags:
cover:
---

1.  
shell在处理命令前先预处理完成一些替换，其优先级较高:  
a.shell替换:文件通配符
b.变量替换
c.命令替换,如下示例:  
``
now=`date`
``
以命令date的标准输出为值,也可以采用如下表示:
`now=$(date)`
2.  
shell元字符汇总
  
|符号|意义|
|:-:|:-:|
|空格、制表符| 命令行参数的分隔符|
|回车| 执行键入的命令|
|&lt; > &brvbar;| 重定向与管道|
|; |多个命令分隔符|
|& |后台运行|
|$ |引用shell的变量|
|\`| 命令替换,`\\`代表反斜线自身,`\``代表反撇号自身|
|\* [] ?| 文件通配符,不匹配\*和/|
|()| 用于定义shell函数或子shell中执行命令|
|\\| 转义字符取消元字符特殊含义，若不用于元字符跟不加一样|
|" "| 其中的内容除$和\`外取消元字符的特殊含义|
|' '| 取消所有元字符特殊含义|

3.  
`bash -x script.sh`调试脚本
4.  
`-x` 可执行返回真
`-f` 文件存在返回真
`-z` 变量为空返回真
`-w` 测试文件可否写
`-r` 测试文件可否读
`-d` 目录文件是否为真
`-s` 文件大小是否大于0
`$(#var)`变量字符数
`$((数字表达式))`必须双括号
5.特殊变量
|变量|意义|
|:-:|:-:|
|`RANDOM`| 随机值|
|`IFS`|分隔符默认为空格|
|`OPTARG`|当前参数后面跟的字符窜|
|`OPTIND`|参数个数|
|`$$`| 该脚本进程ID|
|`$?`|上个调用返回值|
|`$@`|除$0的所有参数列表|
|`$*`|除$0的所有参数列表|
|`$#`|参数个数|
6.追加信息于文件
`cat - >> filename`
7.操作符
|操作符|意义|
|:-:|:-:|
|`:=`| 如果变量未定义则使用后面的定义|
|`:-`|如果变量定义但为空则使用后面定义|
| :? |判断变量是否定义|
8.读文件
```bash
while read line
do
echo $line
done < filename
```
9.eval命令
`eval $(date '+weekday="%a" month="%b" day="%e" year="%G"')`分别赋予几个变量值
10.trap命令
`trap "命令" "信号"`当脚本遇到信号前执行的命令,信号有:SIGEXIT、SIGQUIT(CTRL-C)
11.`{}`花括号中的命令在当前shell执行命令
12.`expr string : pattern`判断是否符合正则表达式
13.
```bash
for <name> in <list>
do 
...
done
```
如果省略list,则list为命令行参数
还有一种`for i in $(seq start step end)`
