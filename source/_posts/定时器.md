---
title: 定时器
date: 2023-10-31 22:16:17
tags:
---

# SIGALRM信号
## 配合setitimer
```C++
#include<stdio.h>
#include<unistd.h>
#include<signal.h>
#include<sys/time.h>

void timer_isr(int sig)
{
	printf("timer_isr: press 'c' and enter to exit:\n");
}
int main()
{
	char c;
	struct itimerval mtimer;
	mtimer.it_value.tv_sec = 5;
	mtimer.it_value.tv_usec = 0;
	mtimer.it_interval.tv_sec = 2;
	mtimer.it_interval.tv_usec = 0;
	signal(SIGALRM, timer_isr);
	setitimer(ITIMER_REAL, &mtimer, NULL);

	while (1){
		c = getchar();
		if (c =='c' || c == 'C'){
			break;
		}
	}
	return 0;
}
```
