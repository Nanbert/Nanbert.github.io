---
title: shell基本概念
date: 2021-10-10 21:13:45
subtitle:
categories:
tags:
cover:
---



### 注释
* 单行注释: #
* 多行注释:  :<<EOF ... EOF或者 :<<! ... !

### 变量
* 创建普通变量: **name="test"** (=两边不可有空格)
* 创建函数体中的局部变量: ** local name="test"**
* 使用变量: **echo $name 或者 echo $(name)** 使用时要加$,重新赋值时不需要
* 只读变量: **name="only_read" -> readonly name**
* 删除变量: **unset name**
  
### 字符串变量
1) 单引号
* 单引号变量var='test',只能原样输出,不能解释变量
* 单引号中不能出现一个单引号,转义也不行

2) 双引号
* 双引号变量`var="my name is ${name}"`,可以解释变量
* 可以出现转移字符

3) 拼接字符串
* **name="this is""my name";name="this is my name";name="this"is"my name"**等效

4) 获取字符串长度
* **name="test";echo ${#name};**输出为4
  
5) 提取子字符串
```bash
name="this is my name";
echo ${name:1:4} #输出his
echo ${name::4} #输出this
```

### 数组
bash只支持以为数组,不支持多维数组
* 定义数组: **array_name=(li wang xiang zhang)** (小括号做边界、使用空格分离)
* 单独定义数组的元素: **arraypara[0]="w";arraypara[3]="s"** (定义时下标可以不连续,同样可以用于赋值)
* 获取数组元素
```bash
array_name[0]="li"
array_name[3]="zhang"
echo ${array_name[0]} #输出"li"
echo ${array_name[1]} #输出空
echo ${array_name[@]} #输出"li zhang"输出数组所有元素,没有元素的下标省略
```
* 取得元素个数:**${#arrayname[@]}或者${#arrayname[\\\*]}**
* 取得单个元素长度: **${#array_name[1]}**

### 参数传递的相关特殊变量

|变量|意义|
|:-:|:-:|
|`$0`| 代表执行的文件名|
|`$n`| 代表传入的第n个参数|
|`$#`|参数个数|
|`$`|以一个单字符串显示所有向脚本传递的参数。即为"$1 $2...$n"|
|`$@`|除$0的所有参数列表|
|`$*`|除$0的所有参数列表(与上面的区别有待研究)|
|`$$`| 该脚本进程ID|
|`$!`| 后台运行的最后一个进程ID|
|`$?`|上个调用(最后命令)返回值,0表示没有错误|

### 运算符

####算数运算
 * `+ - * /`
 * 加法运算
     * `bash val=$(expr 2 + 2)` 这么写乘号要加转义,空格也是必须
     * `val=$[2+2]` (4个空格不是必要的,不同于条件判断)
     * `val=$((2+2))`
	
####数字关系运算符
关系运算符只支持数字,不支持字符串,除非字符串是数字

|符号|意义|
|:-:|:-:|
|`-eq`|相等返回true,`[$a -eq $b]`|
|`-ne`|不相等返回true,`[$a -ne $b]`||
|`-gt`|大于号|
|`-lt`|小于号|
|`-ge`|大于等于号|
|`-le`|小于等于号|

####字符串运算符

|符号|意义|
|:-:|:-:|
|**=**|相等返回true,`[$a = $b]`|
|**!=**|不相等返回true,`[$a != $b]`|
|**-z**|字符串长度为0返回true,`[-z $b]`|
|**-n**|字符串长度不为0返回true,`[-n $b]`|
|**$**|不为空返回true,`[$a]`|

####逻辑运算符

|符号|意义|
|:-:|:-:|
|**!**|非运算,`[! false]`|
|**&&**|与运算,`[[ $a -lt 20 ]] && [[$b -gt 100 ]]`|
|**||**|或运算,`[[ $a -lt 20 ]] || [[$b -gt 100 ]]`,`[[ $a -lt 20 || $b -gt 100 ]]`|

####文件运算符
file是代表文件名的字符串

|符号|意义|
|:-:|:-:|
|`[-b $file]`|是块设备文件返回true|
|`[-c $file]`|是字符备文件返回true|
|`[-d $file]`|是目录返回true|
|`[-f $file]`|是普通文件返回true|
|`[-g $file]`|设置了SGID位文件返回true|
|`[-k $file]`|设置了stick位文件返回true|
|`[-p $file]`|是有名管道文件返回true|
|`[-u $file]`|设置了SUID位文件返回true|
|`[-r $file]`|是可读文件返回true|
|`[-w $file]`|是可写文件返回true|
|`[-x $file]`|是可执行文件返回true|
|`[-s $file]`|非空文件返回true|
|`[-e $file]`|文件存在返回true|

