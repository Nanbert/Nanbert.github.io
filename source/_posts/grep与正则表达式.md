---
title: grep与正则表达式
date: 2020-11-20 19:46:54
subtitle:
categories:
tags:
index_img: https://z3.ax1x.com/2021/04/03/cnhQds.jpg
banner_img: https://z3.ax1x.com/2021/04/03/cnhQds.jpg
---
<font size=4>**1.grep**</font>
格式:`grep [options] [regex] [file...]`

|选项|描述|
|:-:|:-:|
|-i|忽略大小写|
|-v|打印不匹配的文本行|
|-c|只打印匹配或不匹配(-v选项)的行数|
|-l|打印包含匹配项的文件名,而不是文本行本身|
|-L|相似于-l项,但是只是打印不包含匹配项的文件名|
|-n|在每个匹配行之前打印出相应的行号|
|-w|只识别整个单词(即模式前后有空格)|
|-E|识别扩展正则表达式|
|-r|递归对某个目录的所有文件|
|-I|等价于-binary-files=without-match,不匹配二进制|
|-exclude-dir=[目录路径]|跳过某个目录|

<font size=4>**2.正则表达式**</font>
**正则表达式的元字**

|特殊字符|用途|
|:-:|:-:|
|`.`|匹配除换行符外的任一单字符。在awk中,句点也能匹配换行符|
|`*`|匹配任一个(包括零个)在它面前的字符(包括由正则表达式指定的字符)|
|`[...]`|匹配方括号中的字符类中的任意一个。如果方括号中第一个字符为脱字符号(^),则表示否定匹配,即匹配除了换行符和类中列出的那些字符以外的所有字符。在awk中,也匹配换行符。连字符(-)用于表示字符的范围(可以连续用如[A-Za-z0-9])。如果类中的第一个字符为右方括号(])则表示它是类的成员＝所有其他的元字符在被指定为类中的成员时都会失去它们原来的含义|
|`^`|如果作为正则表达式的第一个字符,则表示匹配行的开始。在awk中匹配字符串的开始,即使字符串包含嵌入的换行符|
|`$`|如果作为正则表达式的最后一个字符,则表示匹配行的结尾。在awk中匹配字符串的结尾,即使字符串包含嵌入的换行符。|
|`\{n,m\}`|匹配它前面某个范围内单个字符出现的次数(包括由正则表达式指定的字符)。`\{n\}`将匹配n次出现,`\{n,\}`至少匹配n次出现,而且`\{n,m\}`匹配n和m之间任意次的出现|
|`\`|转义随后的特殊字符|

**POSIX字符类**
POSIX是标准,通用于其它shell命令,不仅仅是正则

|类|打印字符|
|:-:|:-:|
|[:alnum:]|字母数字字符,等价于[A-Za-z0-9]|
|[:word:]|与[:alnum:]相同,但增加了下划线字符|
|[:alpha:]|字母字符|
|[:blank:]|空格和制表符|
|[:cntrl:]|控制字符,0~31和127的ASCII字符|
|[:digit:]|数字字符0~9|
|[:graph:]|可打印和可见的(非空格)字符,33-126的ASCII|
|[:lower:]|小写字符|
|[:upper:]|大写字符|
|[:print:]|可打印的字符(包括空白字符)|
|[:punct:]|标点符号字符,在 ASCII 中, 等 价 于:`-!”#$%&’()*+,./:;<=>?@[\\\]_‘| ̃`|
|[:space:]|空白字符,包括空格,tab,回车,换行,vertical tab和form feed,在ASCII中,等价于:[\t\r\n\v\f]|
|[:xdigit:]|十六进制数字|

**扩展的元字符**

|特殊字符|用途|
|:-:|:-:|
|`+`|匹配前面的正则表达式的一次或多次出现|
|`?`|匹配前面的正则表达式的零次或一次出现|
|`\|`|逻辑表达或,指定可以匹配前面的或后面的正则表达式|
|`()`|对正则表达式分组,括号里的内容选择性匹配,如Lab(oratories),也可以表示结合优先性,如`^(bz|gz|zip) 和 ^bz|gz|zip`的区分,前者表示以三者之一开头的,后者表示以bz开头,或包含gz或zip|
|`{n,m}`|匹配它前面某个范围内单个字符出现的次数,与基本元字符的一样|

<font size=4>**3.grep应用举例**</font>
a.`grep -5 'pattern' inputfile` 打印匹配前后5行
b.`grep -A 5 'pattern' inputfile` 打印匹配后5行
c.`grep -B 5 'pattern' inputfile` 打印匹配前5行
d.`grep -i 'pattern' inputfile` 打印匹配前5行
<font size=4>**4.正则表达式举例**</font>
<font color=#FF0000>可能有些不符合grep的正则</font>
`".*"`引号中的任意字符串
`^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$`邮箱,只允许英文字母、数字、下划线、英文句号、以及中划线组成
`^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$`名称允许汉字、字母、数字,域名只允许英文域名
`^1[3-9][[:digit:]]\{9\}$`中国大陆手机号
`^((http:\/\/)|(https:\/\/))?([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}(\/)`匹配任意域名
`((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))`匹配IP地址
`^[a-zA-Z][a-zA-Z0-9_]{4,15}$`字母开头,允许5-16字节,允许字母数字下划线
`^[\u4e00-\u9fa5]{0,}$`汉字
`^-?[1-9]\d*$`整数
`^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$`浮点数

